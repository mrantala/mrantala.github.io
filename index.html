<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Weight Tracker</title>
  
	<script>
	  // Allowed origins
	  const allowedOrigins = [
		"https://localhost:11443",
		"https://127.0.0.1:1144366666",
		"https://coalfrog.fyi"
	  ];

	  const currentOrigin = window.location.origin;

	  if (!allowedOrigins.includes(currentOrigin)) {
		if (currentOrigin === "http://coalfrog.fyi") {
		  // Redirect to HTTPS production
		  window.location.href = "https://coalfrog.fyi";
		} else {
		  // Redirect to local development
		  window.location.href = "https://localhost:11443/";
		}
	  }
	</script>

  
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/layout.css" />
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0077cc">
</head>

<body>
  <nav id="nav" aria-label="Primary">
    <button data-view="entry" aria-label="Data Entry">
      üìÑ
    </button>
    <button data-view="charts" aria-label="Charts">
      üìà
    </button>
    <button data-view="settings" aria-label="Settings">
      ‚öôÔ∏è
    </button>
    <button data-view="info" aria-label="Info">
      ‚ÑπÔ∏è
    </button>
  </nav>

  <main>
    <!-- Data Entry View -->
	<section id="view-entry" class="view">
	  <h1>Data Entry</h1>

	  <form id="entry-form" novalidate>
		<div class="form-group">
		  <label for="entry-date">Date</label>
		  <input type="date" id="entry-date" required />
		</div>

		<div class="form-group">
		  <label for="entry-weight">Weight</label>
		  <input type="number" id="entry-weight" step="0.1" required />
		  <small id="unit-label" class="hint">lb</small>
		</div>

		<div class="form-group">
		  <label for="entry-comments">Comments</label>
		  <textarea id="entry-comments" rows="3"></textarea>
		</div>

		<div id="edit-indicator" class="hidden edit-banner">
		  Editing existing entry
		</div>

		<div class="form-actions">
		  <button type="submit" id="save-btn">Save</button>
		  <button type="button" id="cancel-edit-btn" class="hidden">Cancel</button>
		</div>
	  </form>

	  <h2>Entries</h2>
	  <ul id="entry-list"></ul>
	</section>

	<!-- Charts View -->
	<section id="view-charts" class="view hidden">
	  <h1>Charts</h1>
	  <canvas id="test-chart" width="400" height="200"></canvas>
	</section>


    <!-- Settings View -->
	<section id="view-settings" class="view hidden">
	  <h1>Settings</h1>

	  <form id="settings-form" novalidate>
		<div class="form-group">
		  <label>Units</label>
		  <div class="radio-group">
			<label>
			  <input type="radio" name="units" value="lb" required />
			  Pounds (lb)
			</label>
			<label>
			  <input type="radio" name="units" value="kg" />
			  Kilograms (kg)
			</label>
		  </div>
		</div>

		<div class="form-group">
		  <label for="goal-weight">Goal Weight (optional)</label>
		  <input type="number" id="goal-weight" step="0.1" />
		</div>

		<div class="form-actions">
		  <button type="submit">Save Settings</button>
		</div>
	  </form>

	  <h2>Data Tools</h2>
	  <div class="form-actions">
		<button id="export-btn">Export Data (CSV)</button>
		<button id="import-btn">Import Data (CSV)</button>
		<input type="file" id="import-file" accept=".csv" class="hidden" />
	  </div>
	</section>

    <!-- Info View -->
    <section id="view-info" class="view hidden">
      <h1>Info</h1>
      <p>About this app.</p>
	  <p id="app-version">v0.0.30d</p>
    </section>
  </main>

  <script src="/libs/chart.umd.js"></script>
  <script type="module" src="js/main.js"></script>
</body>

</html>